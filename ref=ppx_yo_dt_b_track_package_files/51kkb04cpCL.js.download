(function(k){var h=window.AmazonUIPageJS||window.P,B=h._namespace||h.attributeErrors,r=B?B("PackageTrackingAssets",""):h;r.guardFatal?r.guardFatal(k)(r,window):r.execute(function(){k(r,window)})})(function(k,h,B){function r(a,b){return{action:a,trackingId:b.trackingId,csrfToken:b.csrfToken}}function Q(a){return{deviceType:a.deviceType,feedbackSuccessHeading:a.feedbackSuccessHeading,feedbackSuccessMessage:a.feedbackSuccessMessage,optOutSuccessHeading:a.optOutSuccessHeading,optOutSuccessMessage:a.optOutSuccessMessage,
feedbackErrorHeading:a.feedbackErrorHeading,feedbackErrorMessage:a.feedbackErrorMessage,optOutErrorHeading:a.optOutErrorHeading,optOutErrorMessage:a.optOutErrorMessage}}function t(a,b,d,c,f){b=b("#photoOnDelivery-alert");"1"===f?(b.heading(d),b.text(c),b.type("success")):(b.heading(d),b.text(c),b.type("error"));a("#photoOnDelivery-alert").css("display","block")}function L(a,b){k.when("a-secondary-view").execute(function(a){(a=a.get(b))&&a.hide()})}function x(a,b){k.when("a-modal").execute(function(a){(a=
a.get(b))&&a.hide()})}function R(a){return!a||0===a.length||!a.trim()}"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("emit-edd-in-the-past-csm-metrics",function(a,b){a=a.$;a("#pt2-get-refund-connection").length&&b.incrementCount("pt2-get-refund-connection-shown");a("#pt2-get-replacement-connection").length&&b.incrementCount("pt2-get-replacement-connection-shown");a("#pt2-get-replacement-or-refund-connection").length&&b.incrementCount("pt2-get-replacement-or-refund-connection-shown");
a=a("#pt2-contact-us-connection");a.length&&b.incrementCount("pt2-contact-us-"+a.data("reason"))});"use strict";k.when("A","ready").register("page-load",function(a){var b=a.$;setTimeout(function(){b("#pageContainer").removeClass("fade-out")},300);return{loadedAt:(new Date).getTime()}});k.when("A","ready").register("iphone-x-fix",function(a){a=a.$;var b=/iPhone/.test(navigator.userAgent)&&!h.MSStream,d=h.devicePixelRatio||1,c=h.screen.width*d,d=h.screen.height*d;b&&1125==c&&2436===d&&a("#pageContainer").addClass("iphone-x")});
"use strict";k.when("A","ready").register("pt2-page-utils",function(a){return{modifyPageScrollStatus:function(b){var d,c=a.$("#a-page"),f=a.$("body");b?(d=f.scrollTop(),a.requestAnimationFrame(function(){c.css({position:"fixed",top:"-"+d+"px"})},c[0])):a.requestAnimationFrame(function(){c.css({position:"",top:""});f.scrollTop(d)},c[0])},debounce:function(a,d,c){var f;return function(){var g=this,e=arguments,n=c&&!f;clearTimeout(f);f=setTimeout(function(){f=null;c||a.apply(g,e)},d);n&&a.apply(g,e)}}}});
k.when("A","pt2-csm-metrics-utils","ready").register("sign-in-again-or-do",function(a,b){var d=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/is-authenticated":"/progress-tracker/package/actions/is-authenticated",c;return function(f,b,e,n,v){a.post(d,{params:{csrfToken:n.csrfToken},success:function(a){a.success&&a.value?v&&v():a.success?(a=f.$currentTarget,n.width=620>h.innerWidth?.75*h.innerWidth:600,n.name=e,n.dataStrategy="preload",c||(c=b.create(a,n)),
c.update({header:n.header||""}).show()):console.log("service failed")},error:function(a){}})}});k.when("A","map-tracking-status","response-code","pt2-csm-metrics-utils","ready").register("map-tracking-memoization",function(a,b,d,c){var f=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/map-tracking/memoize":"/progress-tracker/package/actions/map-tracking/memoize";return function(b,e,d,v,l){function m(b){a.post(f,{params:p,success:function(a){c.stopWidgetTimer("map-tracking-memoization-ajax-call");
c.incrementCount("map-tracking-memoization-succeeded");a.success&&a.value?v&&v(a.value):l&&l(a.responseCode)},error:function(a){3>b?(c.incrementCount("map-tracking-memoization-attempt-"+(b+2)),setTimeout(function(){m(b+1)},0)):(c.logError({feature:"map-tracking-memoization-ajax-call",message:a.responseCode}),c.incrementCount("map-tracking-memoization-failed"),l&&l(a.responseCode))}})}var p={trackingId:e.trackingId,status:b.status,csrfToken:h.csrfToken,numberOfMemoizations:d,isDriverPhotoPresent:!0===
e.mapTracking.isDriverPhotoPresent,transporterId:e.mapTracking.transporterId,driverNameTitle:e.mapTracking.driverNameTitle};if(d=parseInt(b.stops,10))p.stops=d;e.timezone&&(p.timezone=e.timezone);e.customerId&&(p.customerId=e.customerId);e.visitTrigger&&(p.visitTrigger=e.visitTrigger);b.lastStopsRemainingDecreaseTime&&(p.lastStopsRemainingDecreaseTime=1E3*b.lastStopsRemainingDecreaseTime);c.startWidgetTimer("map-tracking-memoization-ajax-call");m(0)}});k.when("A","map-tracking-status","response-code",
"pt2-csm-metrics-utils","ready").register("map-tracking-confirmation",function(a,b,d,c){var f=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/map-tracking/confirm":"/progress-tracker/package/actions/map-tracking/confirm";return function(g,e,d){function v(){function b(g){a.post(f,{params:l,success:function(a){c.stopWidgetTimer("map-tracking-confirmation-ajax-call");c.incrementCount("map-tracking-confirmation-succeeded");e&&e(a.value)},error:function(a){3>
g?(c.incrementCount("map-tracking-confirmation-attempt-"+(g+2)),setTimeout(function(){b(g+1)},0)):(c.logError({feature:"map-tracking-confirmation-ajax-call",message:a.responseCode}),c.incrementCount("map-tracking-confirmation-failed"),d&&d(a.responseCode),setTimeout(v,3E5))}})}c.startWidgetTimer("map-tracking-confirmation-ajax-call");b(0)}var l={trackingId:g.trackingId,status:b.DELIVERED,csrfToken:h.csrfToken};g.timezone&&(l.timezone=g.timezone);g.customerId&&(l.customerId=g.customerId);g.visitTrigger&&
(l.visitTrigger=g.visitTrigger);setTimeout(v,3E5)}});k.when("A","ready").register("map-tracking-status",function(a){return{RENDERED:"RENDERED",OUT_FOR_DELIVERY:"OUT_FOR_DELIVERY",PICKED_UP:"PICKED_UP",YOU_ARE_NEXT:"YOU_ARE_NEXT",DELIVERED:"DELIVERED",DELIVERED_CONFIRMED:"DELIVERED_CONFIRMED",ERROR:"ERROR",FATAL:"FATAL",ADDRESS_NOT_FOUND:"ADDRESS_NOT_FOUND",SKIPPED_STOP:"SKIPPED_STOP",DELIVERY_FAILED:"DELIVERY_FAILED",PARTIALLY_DELIVERED:"PARTIALLY_DELIVERED",DELIVERY_ATTEMPTED:"DELIVERY_ATTEMPTED",
NOT_DELIVERED:"NOT_DELIVERED",REJECTED:"REJECTED",UNKNOWN:"UNKNOWN"}});k.when("A","ready").register("response-code",function(a){return{UNSTRUSTED_REQUEST:"UNSTRUSTED_REQUEST",INVALID_TOKEN:"INVALID_TOKEN",AUTHENTICATED:"AUTHENTICATED",NOT_AUTHENTICATED:"NOT_AUTHENTICATED",MISSING_INPUTS:"MISSING_INPUTS",SUCCESS:"SUCCESS",SERVICE_FAILED:"SERVICE_FAILED",UNKNOWN_ACTION:"UNKNOWN_ACTION"}});k.when("A","ready").register("cookie-monster",function(a){function b(a){return(decodeURIComponent(document.cookie).match(new RegExp(a+
"\x3d([^;]+)"))||["",""])[1]}return{get:b,getJson:function(a){a=b(a);if(!a)return{};try{return JSON.parse(a)}catch(c){return{}}},set:function(a,b,f){if(a){if(f&&0<f){var g=new Date;g.setTime(g.getTime()+864E5*f);document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+"; expires\x3d"+g.toUTCString()+";path\x3d/"}else document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+";path\x3d/";return!0}return!1},remove:function(a){return a?(document.cookie=encodeURIComponent(a)+"\x3d; expires\x3dSat, 19 Jan 1974 01:00:00 GMT",
!0):!1}}});k.when("A","ready").register("failsafe",function(a){function b(a){g=a;l=(new Date).getTime();h=setTimeout(function(){n=!0;e()},g)}function d(){h&&clearTimeout(h);h=null}var c,f,g,e,n=!1,h=null,l=null,m=null;return{init:function(a){a=a||{};c=a.initialDelay||3500;f=a.extension||500;e=a.onTimeout||function(){};m=(new Date).getTime();b(c)},reset:d,extend:function(){if(!n){var a=(new Date).getTime()-l,a=g-a+f;d();0<a&&b(a)}},hasFired:function(){return n},totalElapsedTime:function(){return(new Date).getTime()-
m}}});k.when("A","ready").register("preload-images",function(a){function b(a){b.list||(b.list=[]);for(var c=b.list,f=0;f<a.length;f++){var g=new Image;g.onload=function(){var a=c.indexOf(this);-1!==a&&c.splice(a,1)};c.push(g);g.src=a[f]}}return{preloadImages:b}});"use strict";k.register("pt2-csm-metrics-utils",function(){var a,b;try{a=navigator.userAgent}catch(f){a=""}a&&(a=a.toLowerCase(),(a=a.match(/(chrome|firefox|safari|trident|ddge|opr|crios|fxios)/gi))&&0<a.length&&(-1<a.indexOf("safari")&&
1<a.length?-1<a.indexOf("chrome")||-1<a.indexOf("crios")?b="chrome":-1<a.indexOf("fxios")&&(b="firefox"):b=a[0]));var d=[],c=function(a){h.ue&&h.uex&&uex("ld",a,{wb:1});a=d.indexOf(a);-1<a&&d.splice(a,1)};h.addEventListener("beforeunload",function(a){for(;0<d.length;)c(d[0])});return{setScope:function(a){h.ue&&h.uet&&h.uet("tc",a);return a},setPreAjax:function(a){h.ue&&h.ues&&h.ues("t0",a,new Date)},setPostAjax:function(a){h.ue&&h.uet&&h.uet("be",a)},sendAjaxMetrics:function(a){h.ue&&h.uex&&h.uex("ld",
a)},recordReftag:function(a,b){a.ajax({type:"POST",url:"/gp/mobile/tag?"+b,success:function(a){console.log("record ref tag ajax call success: ",a)},error:function(a){console.log("ref tag ajax call error: ",a)}})},logFatal:function(a){if(h.ueLogError){var b=a.feature||"pt2-fatal-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"FATAL",attribution:b})}},logError:function(a){if(h.ueLogError){var b=a.feature||"pt2-error-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"ERROR",
attribution:b})}},logWarn:function(a){if(h.ueLogError){var b=a.feature||"pt2-warn-generic";h.ueLogError(a.error||{message:a.message||b},{logLevel:"WARN",attribution:b})}},incrementCount:function(a,c){h.ue&&h.ue.count&&(h.ue.count(a,(h.ue.count(a)||0)+1),c&&c.browser&&b&&h.ue.count(a+"-"+b,(h.ue.count(a+"-"+b)||0)+1))},startWidgetTimer:function(a){h.ue&&h.uet&&0>d.indexOf(a)&&(uet("bb",a,{wb:1}),d.push(a))},stopWidgetTimer:c}});"use strict";k.when("A","ready").register("redirect-countdown-utils",function(a){var b=
a.$,d=function(){a.interval(function(){var a=b("#pt-error-second-timer"),f=parseInt(a.data("seconds"));f--;a.data("seconds",f);0<=a.data("seconds")&&a.html(f)},1E3)};b("#pt-error-second-timer")&&d()});"use strict";k.when("A","pt2-csm-metrics-utils","a-tooltip","ready").register("pt2-tooltip",function(a,b,d){function c(a){b.incrementCount(a+"-total");n&&(b.incrementCount(a+"-unique"),n=!1)}function f(a){g("body").addClass("pt2-tooltip-style-override "+e.deviceType);g(".pt2-tooltip-trigger."+a).attr("title",
"")}var g=a.$,e=a.state("page-state")||{},n=!0,h=function(b){a.declarative("a-tooltip","mouseenter",function(a){f(b);c(b)})},l=function(b){a.declarative("a-tooltip","click",function(a){f(b);a=g(".pt2-tooltip-trigger."+b);a=d.get(a);a.isVisible()?a.hide():c(b)})};return function(a){"desktop"===e.deviceType?h(a):l(a)}});"use strict";k.when("A","ready").register("BarAnimationController",function(a){a=function(a){this.options=a||{};this.currentBarIndex=0;this.animationDuration=a.animationDuration||200;
this.lastAnimationDuration=a.lastAnimationDuration||800;this.numberOfReached=a.numberOfReached;this.completionPercentage=a.completionPercentage||50;this.onAllBarsDone=a.onAllBarsDone};a.prototype.animateOneBar=function(){var a=this,d=a.currentBarIndex<a.numberOfReached-1?100:a.completionPercentage,c=a.currentBarIndex<a.numberOfReached-1?a.animationDuration:a.lastAnimationDuration*a.completionPercentage/100;a.options.renderOneBar&&a.options.renderOneBar({index:a.currentBarIndex,height:d,duration:c,
lastReached:a.currentBarIndex===a.numberOfReached-1,onComplete:function(){if(a.currentBarIndex<a.numberOfReached-1)a.currentBarIndex++,a.animateOneBar();else if(a.onAllBarsDone)a.onAllBarsDone({index:a.currentBarIndex})}})};a.prototype.startAnimation=function(){this.animateOneBar()};return a});"use strict";k.when("A","milestone-selectors","BarAnimationController","ready").register("BarAnimation",function(a,b,d){var c=a.state("page-state")||{};if(c.progressTracker){var f=a.$,g=f(b.milestoneBars),e=
f(b.milestoneMarkers),n=new d({numberOfReached:c.progressTracker.numberOfReachedMilestones,completionPercentage:c.progressTracker.lastTransitionPercentComplete,animationDuration:150,lastAnimationDuration:1500,renderOneBar:function(a){var b=f(e[a.index]),c=b.closest(".milestone");b.animate({opacity:.3},100,function(){c.removeClass("notReached").addClass("reached");a.lastReached&&c.addClass("lastReached");b.animate({opacity:1},200)});f(g[a.index]).animate({height:a.height+"%"},a.duration,"linear",function(){a.onComplete()})},
onAllBarsDone:function(){}});setTimeout(function(){n.startAnimation()},1E3)}});"use strict";k.declare("milestone-selectors",{milestoneBars:".js-milestone-bar",milestoneMarkers:".milestone-marker"});"use strict";k.when("A","ready").register("stickyTop",function(a){function b(a){var e=f.offset().top;d(h).scrollTop()>e?g.hasClass(a)||g.addClass(a):g.hasClass(a)&&g.removeClass(a);setTimeout(function(){b(a)},10)}var d=a.$,c=a.state("page-state")||{},f=d("#stickyTop-container-wrapper"),g=d("#stickyTop-container"),
e=g.height();"mobile"===c.deviceType&&a.on.load(function(){0!==g.length&&(d("#staticContent-container").css("margin-top",e),c.progressTracker&&b("sticky"),c.isLexicalExceptionMessagePresent&&b("sticky-lexical"),(!c.progressTracker&&!c.isLexicalExceptionMessagePresent||c.pickUpInformation||"DELIVERED"===c.lastReachedMilestone)&&g.addClass("no-progress"))})});"use strict";k.when("A","a-sheet","pt2-page-utils","pt2-csm-metrics-utils","ready").register("configure-tracking-event-bsheet",function(a,b,d,
c){var f=a.$,g;a.declarative("tracking-events-open-bottom-sheet",["click"],function(e){var d=e.$currentTarget.find("a").data("ref");g||(e=a.extend({},e.data),e.height=.75*h.innerHeight,e.preloadDomId="tracking-events-container",e.name="tracking-events-bottom-sheet",e.sheetType="web",e.closeType="icon",g=b.create(e));g.show();c.recordReftag(f,d)});a.on("a:sheet:beforeShow:tracking-events-bottom-sheet",function(a){d.modifyPageScrollStatus(!0)});a.on("a:sheet:beforeHide:tracking-events-bottom-sheet",
function(a){d.modifyPageScrollStatus(!1)})});"use strict";k.when("A","a-modal","pt2-csm-metrics-utils","ready").register("configure-tracking-event-modal",function(a,b,d){var c=a.$,f;a.declarative("tracking-events-open-modal","click",function(g){var e=g.$currentTarget,n=e.find("a").data("ref");f||(g=a.extend({},g.data),g.width=620>h.innerWidth?.75*h.innerWidth:600,g.name="tracking-events-modal",g.dataStrategy="preload",g.padding="none",g.hideHeader=!0,f=b.create(e,g));f.show();d.recordReftag(c,n)})});
"use strict";k.when("A","a-secondary-view","pt2-csm-metrics-utils","ready").register("configure-tracking-event-secondary-view",function(a,b,d){var c=a.$,f;a.declarative("tracking-events-open-secondary-view",["click","touchend"],function(g){var e=g.$currentTarget,n=e.find("a").data("ref");f||(g=a.extend({},g.data),g.name="tracking-events-secondary-view",g.dataStrategy="preload",f=b.create(e,g));f.show();d.recordReftag(c,n)})});"use strict";k.when("A","a-modal","pt2-page-utils","pt2-csm-metrics-utils",
"ready").register("configure-tracking-event-popup",function(a,b,d,c){var f=a.$,g,e,n,v=a.state("page-state")||{};k.when("a-sheet").execute("initialize-aui-sheet",function(a){g=a});a.declarative("tracking-events-open-popup",["click"],function(d){var k=d.$currentTarget,p=k.find("a").data("ref");d=a.extend({},d.data);if("mobile"===v.deviceType)(k=e)||(d.height=.75*h.innerHeight,d.preloadDomId="tracking-events-container",d.name="tracking-events-bottom-sheet",d.sheetType="web",d.closeType="icon",k=g.create(d)),
e=k,e.show();else{var q;(q=n)||(d.width=620>h.innerWidth?.75*h.innerWidth:600,d.name="tracking-events-modal",d.dataStrategy="preload",d.padding="none",d.hideHeader=!0,q=b.create(k,d));n=q;n.show()}c.recordReftag(f,p)});a.on("a:sheet:beforeShow:tracking-events-bottom-sheet",function(a){d.modifyPageScrollStatus(!0)});a.on("a:sheet:beforeHide:tracking-events-bottom-sheet",function(a){d.modifyPageScrollStatus(!1)})});"use strict";k.when("A","page-load","map-tracking-memoization","map-tracking-confirmation",
"map-tracking-status","response-code","pt2-csm-metrics-utils","failsafe","maptracker-url","ready").register("MapTracking",function(a,b,d,c,f,g,e,n,k){h.jQuery=a.$;var l=a.state("page-state")||{},m=l.distanceFromDeliveryCutoffTime;if(!document.querySelectorAll(".pt-persistent-map-layout").length&&l.mapTracking){var p=a.$("#mapTracking-container");if(0<p.length){var q={browser:!0};try{var E=a.$("#staticContent-behindMap"),y=a.$("#split-container"),F=a.$("#itemImages-container-forMapTracking"),G=a.$("#mapShowLink-container"),
ca=a.$("#mapTracking-unavailableMessage"),w=a.$("#mapTracking-freshness").length?a.$("#mapTracking-freshness"):{html:function(){e.incrementCount("map-tracking-error-freshness");e.logError({feature:"map-tracking-error",message:"#mapTracking-freshness does not exist for "+l.trackingId})}},C=a.$("#mapHideLink-container"),r=a.$("#primaryStatus"),z=a.$("#secondaryStatus").length?a.$("#secondaryStatus"):{html:function(){e.incrementCount("map-tracking-error-secondary-status");e.logError({feature:"map-tracking-error",
message:"#secondaryStatus does not exist for "+l.trackingId})}},u=a.$("#nav-upnav"),M=a.$("header"),A=a.$("#stickyTop-container"),t=a.$("#signInAgain-container .signInAgain-phrase-with-link"),L=0<a.$("#lexicalProgressTracker-container").length;k=function(){e.incrementCount("map-tracking-error-map-tracker");e.logError({feature:"map-tracking-error",message:"#mapTracker does not exist for "+l.trackingId})};var Y=a.$("#mapTracker").length?a.$("#mapTracker"):{animate:k,css:k},da=!1;if("mobile"===l.deviceType){k=
0;0<u.length&&(k+=u.height());0<M.length&&(k+=M.height());0<A.length&&(k+=A.height());l.mapTracking.rendersSurveyLink&&(k+=30);k+=120;var S=a.$("#pageContainer").hasClass("iphone-x")?a.$(h).height()-k+34:a.$(h).height()-k;150>S&&(S=150);Y.css("height",S);w.addClass("mobile")}a.$.getScript(l.mapTracking.url||"https://d34zfp2ojglz50.cloudfront.net/MapTracker.js",function(k,v,M){function A(){p.show();da||(n.init({initialDelay:3500,extension:500,onTimeout:function(){N(!1);e.incrementCount("map-tracking-failsafed",
q);e.logError({feature:"map-tracking-failsafed-log",message:"Map failsafed for tracking Id: "+l.trackingId})}}),e.incrementCount("map-tracking-map-initialized",q),h.MapTracker.init({container:"mapTracker",trackingId:l.trackingId,appId:"AMZL",onChange:S,sessionId:ka}));da=!0;"mobile"===l.deviceType?(E.length&&E.hide(),h.scrollTo(0,0)):(y.length&&y.hide(),F.length&&F.fadeIn("slow"));G.length&&G.hide();p.fadeIn("slow");Z?W?x(W):X&&B(X):u(ea)}function S(a){ea=a;Z=!1;a&&a.message&&("string"===typeof a.message?
e.logError({feature:"map-tracking-event-log",message:"Map event received for tracking Id: "+l.trackingId+" with message ["+a.message+"] and url ["+a.url+"]"}):"object"===typeof a.message&&a.message.statusText&&e.logError({feature:"map-tracking-event-log",message:"Map event received for tracking Id: "+l.trackingId+" with message ["+JSON.stringify(a.message)+"] and url ["+a.url+"]"}));switch(a.status){case f.RENDERED:T=!0;n.hasFired()?(e.incrementCount("map-tracking-failsafed-prematurely",q),e.incrementCount("map-tracking-failsafed-latency-"+
Math.floor(n.totalElapsedTime()/1E3),q),e.logError({feature:"map-tracking-failsafed-prematurely-log",message:"Map failsafed prematurely for tracking Id: "+l.trackingId})):n.reset();e.startWidgetTimer("map-tracking-map-dwell-time");e.incrementCount("map-tracking-map-rendered",q);break;case f.ERROR:T?(e.incrementCount("map-tracking-error"),e.logError({feature:"map-tracking-error-log",message:"Map error for trackingId: "+l.trackingId+"with message ["+a.message+"] and url ["+a.url+"]"})):(n.extend(),
e.incrementCount("map-tracking-error-pre-render",q),e.logError({feature:"map-tracking-error-pre-render-log",message:"Map error pre render for trackingId: "+l.trackingId+" with message ["+a.message+"] and url ["+a.url+"]"}));break;case f.FATAL:T?(I({secondaryStatus:""}),J({calloutMessage:""}),O(),U(),e.incrementCount("map-tracking-fatal",q)):(n.reset(),N(!1),e.incrementCount("map-tracking-fatal-pre-render",q),e.logError({feature:"map-tracking-fatal-pre-render-log",message:"Map fatal pre render for trackingId: "+
l.trackingId+"with message ["+a.message+"] and url ["+a.url+"]"}));D(!1);a.message&&("string"===typeof a.message?(e.incrementCount("map-tracking-fatal-"+a.message.toLowerCase().replace(/[\s_]+/g,"-"),q),e.logError({feature:"map-tracking-fatal-log",message:"Map received fatal message ["+a.message+"] with url ["+a.url+"] for tracking Id: "+l.trackingId})):"object"===typeof a.message&&a.message.statusText&&(e.incrementCount("map-tracking-fatal-"+a.message.statusText.toLowerCase().replace(/[\s_]+/g,"-"),
q),e.logError({feature:"map-tracking-fatal-log",message:"Map received fatal message ["+JSON.stringify(a.message)+"] with url ["+a.url+"] for tracking Id: "+l.trackingId})));break;case f.ADDRESS_NOT_FOUND:T?(I({secondaryStatus:""}),J({calloutMessage:""}),D(!1),O(),U(),e.incrementCount("map-tracking-address-not-found",q)):(n.reset(),N(!1),D(!1),e.incrementCount("map-tracking-address-not-found-pre-render",q));break;default:p.is(":visible")?u(a):e.incrementCount("map-tracking-memoization-skipped")}}function u(a){Z=
!0;d(a,l,fa,x,B)}function x(a){fa++;W=a;X=null;switch(a.status){case f.PICKED_UP:case f.YOU_ARE_NEXT:null!==K&&0>K&&e.incrementCount("map-tracking-skipped-stop-became_healthy");K=a.stops;I(a);J(a);D(!0);V=!1;break;case f.SKIPPED_STOP:null===K?e.incrementCount("map-tracking-skipped-stop-landing"):-1<K&&(e.incrementCount("map-tracking-skipped-after-[#]-stops".replace("[#]",K)),e.incrementCount("map-tracking-skipped-stop-after-healthy"),K=-1);I(a);J(a);D(!0);V=!1;break;case f.PARTIALLY_DELIVERED:case f.DELIVERY_ATTEMPTED:case f.NOT_DELIVERED:case f.REJECTED:Q(a);
I(a);J(a);aa();D(!1);O();U();e.incrementCount("map-tracking-"+a.status.toLowerCase().replace(/_/g,"-"));break;case f.DELIVERED:Q(a),I(a),J(a),aa(),D(!1),O(),null===V?e.incrementCount("map-tracking-already-delivered"):!1===V&&e.incrementCount("map-tracking-became-delivered"),V=!0,c(l,function(){h.location.reload()},function(a){})}}function B(a){W=null;X=a;switch(a){case g.NOT_AUTHENTICATED:ga||(I({secondaryStatus:0<t.length?t.html():"",emphasized:!0}),D(!1),O(),U(),aa(),ga=!0,e.incrementCount("map-tracking-sign-in-again"));
break;case g.INVALID_TOKEN:ha||(I({secondaryStatus:""}),J({calloutMessage:""}),D(!1),O(),U(),ha=!0,a=(((new Date).getTime()-b.loadedAt)/100).toFixed(1),e.incrementCount("map-tracking-invalid-token"),e.logError({feature:"map-tracking-invalid-token-log",message:"Invalid csrf token ("+h.csrfToken.length+":"+a+")"}))}}function N(a){"mobile"===l.deviceType?E.fadeIn("slow"):(y.fadeIn("slow"),F.attr("style","display: none !important"));a?G.length&&G.show():(G.length&&G.hide(),T&&ca.length&&ca.show());p.hide();
l.keepSecondaryUntouched||z.html(l.mapTracking.originalSecondaryStatus||"")}function Q(a){(a.primaryStatus||""===a.primaryStatus)&&r.html(a.primaryStatus)}function I(a){!p.is(":visible")||l.keepSecondaryUntouched||!a.secondaryStatus&&""!==a.secondaryStatus||(z.html(a.secondaryStatus),a.emphasized?z.addClass("text-emphasized"):z.removeClass("text-emphasized"))}function J(a){l.keepSecondaryUntouched&&null!==l.mapTracking&&null!==l.mapTracking.calloutMessage&&""!==l.mapTracking.calloutMessage&&(a.calloutMessage||
""===a.calloutMessage)&&h.MapTracker.updateDeliveryAgentBubble({content:a.calloutMessage})}function R(){0===P?w.html(l.mapTracking.updatedNow):w.html(l.mapTracking.updatedPluralSecondsAgo.replace("[#]",P));P+=ia;60<P?w.addClass("text-emphasized"):w.removeClass("text-emphasized");180<P&&N(!1)}function O(){0<w.length&&w.animate({opacity:0},1E3,function(){w.hide()})}function aa(){0<C.length&&C.animate({opacity:0},1E3,function(){C.hide()})}function U(){Y.length&&Y.animate({opacity:.2},1E3);e.startWidgetTimer("map-tracking-map-zombie-time")}
function D(a){P=0;ba&&clearInterval(ba);a&&(R(),ba=setInterval(R,1E3*ia))}function la(){setTimeout(function(){location.reload()},m+1E4)}var ga=!1,ha=!1,K=null,T=!1,V=null,Z=!0,ea=null,W=null,X=null,fa=0,ka=l.mapTracking.mapSessionId||!1;L?N(!0):A();0<m&&la();a.declarative("mapTracking-show-map","click",function(a){a=a.$currentTarget.find("a").data("ref");A();e.recordReftag(h.jQuery,a)});a.declarative("mapTracking-hide-map","click",function(a){a=a.$currentTarget.find("a").data("ref");N(!0);e.recordReftag(h.jQuery,
a)});var P=0,ia=10,ba=null;D(!0)})}catch(ja){e.incrementCount("map-tracking-error-generic"),e.logError({error:ja,feature:"map-tracking-error",message:"map tracking failed for "+l.trackingId})}}else e.incrementCount("map-tracking-warn-map-tracking-container"),e.logWarn({feature:"map-tracking-warn",message:"pageState.mapTracking exists but $mapContainer does not for "+l.trackingId})}});"use strict";k.declare("maptracker-url",{url:"https://do6e2c3moa96p.cloudfront.net/MapTracker.js"});"use strict";k.when("A",
"page-load","pt2-csm-metrics-utils","ready").execute(function(a,b,d){a=a.$;0<a("#photoOnDelivery-container").length&&d.incrementCount("photo-on-delivery-container-present",{browser:!0})});k.when("A","a-modal","pt2-csm-metrics-utils","sign-in-again-or-do","ready").register("configure-photo-on-delivery-modal",function(a,b,d,c){var f=a.$;a.declarative("photo-on-delivery-open-modal","click",function(g){var e=a.extend({},g.data);c(g,b,"sign-in-again-modal",e,function(){var a=g.$currentTarget,c=a.find("a").data("ref");
e.width=620>h.innerWidth?.75*h.innerWidth:600;e.name="photo-on-delivery-"+a.find("a").data("form")+"-modal";e.dataStrategy="preload";b.create(a,e).show();d.recordReftag(f,c)})})});k.when("A","a-secondary-view","pt2-csm-metrics-utils","sign-in-again-or-do","ready").register("configure-photo-on-delivery-secondary-view",function(a,b,d,c){var f=a.$;a.declarative("photo-on-delivery-open-sec-view","click",function(g){var e=a.extend({},g.data);c(g,b,"sign-in-again-secondary-view",e,function(){var a=g.$currentTarget,
c=a.find("a").data("ref");e.name="photo-on-delivery-"+a.find("a").data("form")+"-secondary-view";e.dataStrategy="preload";b.create(a,e).show();d.recordReftag(f,c)})})});k.when("A","a-alert","a-button","pt2-csm-metrics-utils").execute(function(a,b,d,c){var f=a.$,g=f("#photoOnDelivery-feedback-textarea");f(document).keyup(function(a){a=d("#photoOnDelivery-feedback-submitBtn");var b=g.val();R(b)?a.disable():a.enable()});a.declarative("submit-photo-on-delivery-feedback","click",function(e){e.$event.preventDefault();
var h=Q(e.data),k=f("#photoOnDelivery-feedback-secondary-view-trigger"),l=f("#photoOnDelivery-feedback-modal-trigger");if(!R(g.val())){var m=r("submit-photo-on-delivery-feedback",e.data);m.feedback=g.val();var p=c.setScope("pt2PodFeedbackAjaxLatencyScope");c.setPreAjax(p);e=e.$currentTarget.find("input").data("ref");a.post("/progress-tracker/package/actions/photo-on-delivery?"+e,{params:m,success:function(a){a.success&&a.value?(t(f,b,h.feedbackSuccessHeading,h.feedbackSuccessMessage,"1"),g.val(""),
d("#photoOnDelivery-feedback-submitBtn").disable()):t(f,b,h.feedbackErrorHeading,h.feedbackErrorMessage,"0");"mobile"===h.deviceType?L(f,k):x(f,l);c.setPostAjax(p);c.sendAjaxMetrics(p)},error:function(a){t(f,b,h.feedbackErrorHeading,h.feedbackErrorMessage,"0");"mobile"===h.deviceType?L(f,k):x(f,l);c.setPostAjax(p);c.sendAjaxMetrics(p)}})}});a.declarative("submit-photo-on-delivery-optout","click",function(e){e.$event.preventDefault();var c=Q(e.data),d=f("#photoOnDelivery-optout-secondary-view-trigger"),
g=f("#photoOnDelivery-optout-modal-trigger"),h=r("submit-photo-on-delivery-optout",e.data);e=e.$currentTarget.find("input").data("ref");a.post("/progress-tracker/package/actions/photo-on-delivery?"+e,{params:h,dataType:"json",success:function(a){a.success&&a.value?(t(f,b,c.optOutSuccessHeading,c.optOutSuccessMessage,"1"),f("#photoOnDelivery-container").detach()):t(f,b,c.optOutErrorHeading,c.optOutErrorMessage,"0");"mobile"===c.deviceType?L(f,d):x(f,g)},error:function(a){t(f,b,c.optOutErrorHeading,
c.optOutErrorMessage,"0");"mobile"===c.deviceType?L(f,d):x(f,g)}})})});"use strict";k.when("A","cookie-monster","ready").register("update-my-address",function(a,b){function d(){q=new H.map.Marker({lat:m.latitude,lng:m.longitude});q.draggable=!0;h.addObject(q);h.addEventListener("dragstart",function(a){a.target instanceof H.map.Marker&&E.disable()},!1);h.addEventListener("dragend",function(a){m={latitude:q.b.lat,longitude:q.b.lng};a.target instanceof mapsjs.map.Marker&&E.enable()},!1);h.addEventListener("drag",
function(a){var b=a.target;a=a.currentPointer;b instanceof mapsjs.map.Marker&&b.setPosition(h.screenToGeo(a.viewportX,a.viewportY))},!1)}function c(b,e,c,g){k=document.getElementById(b);l=a.$(e);l.click(f);p=m=c;y=g||14;b=(new H.service.Platform({app_id:"FS1rcDYpsifo3E1tyXb6",app_code:"uMJ-il_IZ-9B_fkF-BpsUg",useCIT:!0,useHTTPS:!0})).createDefaultLayers();k.innerHTML="";h=new H.Map(k,b.normal.map,{center:{lat:m.latitude,lng:m.longitude},zoom:y});E=new H.mapevents.Behavior(new H.mapevents.MapEvents(h));
H.ui.UI.createDefault(h,b,"en-US");d()}function f(a,b){h.setCenter({lat:m.latitude,lng:m.longitude},!0);setTimeout(function(){alert("Will make an ajax call to save the updated geocode and display a success message here.");b&&b()},500)}function g(b,e){var c={};a.$.ajax({url:"https://securephotostorageservice-na-external.amazon.com/DEANSExternalPackageLocationDetailsProxy/trackingObjectId/"+b+"/clientName/AMZL",headers:{"x-amzn-SessionId":F},dataType:"json",xhrFields:{withCredentials:!0},success:function(a){null!=
a&&a.destinationAddress&&a.destinationAddress.geoLocation?(c.success=!0,c.geocode={latitude:a.destinationAddress.geoLocation.latitude,longitude:a.destinationAddress.geoLocation.longitude}):c.success=!1;e&&e(c)},error:function(a,b,d){c.success=!1;e&&e(c)}})}function e(a,b){var e={success:!1};setTimeout(function(){b&&b(e)},500)}var h,k,l,m,p,q,E,y,F;return{init:function(a){(F=b.get("session-id"))||console.log("sessionId cookie not present");if(!a)return console.log("options is required"),!1;if("object"!==
typeof a)return console.log("options must be an object"),!1;if(!a.mapContainerId)return console.log("options.mapContainerId is required"),!1;if(!a.submitButtonSelector)return console.log("options.submitButtonSelector is required"),!1;if(a.position&&a.position.latitude&&a.position.longitude)c(a.mapContainerId,a.submitButtonSelector,a.position,a.zoom);else if(a.addressId)e(a.addressId,function(b){if(!b||!b.success)return!1;c(a.mapContainerId,a.submitButtonSelector,b.geocode,a.zoom)});else if(a.trackingId)g(a.trackingId,
function(b){if(!b||!b.success)return!1;c(a.mapContainerId,a.submitButtonSelector,b.geocode,a.zoom)});else return console.log("options.position or options.addressId or options.trackingId is required for the marker on the map"),!1},resetMap:function(){m=p;q.setPosition({lat:m.latitude,lng:m.longitude});h.setCenter(position,!0)},getPosition:function(){return m}}});k.when("A","a-modal","update-my-address","pt2-csm-metrics-utils","ready").register("configure-update-my-address-modal",function(a,b,d,c){var f=
a.state("page-state")||{};a.declarative("update-my-address-open-modal","click",function(c){var e=a.extend({},c.data);c=c.$currentTarget;e.width=620>h.innerWidth?.75*h.innerWidth:600;e.name="update-my-address-modal";e.dataStrategy="preload";e.header=c.find("a").html();b.create(c,e).show();d.init({mapContainerId:"updateMyAddress-map",submitButtonSelector:"#updateMyAddress-submit",trackingId:f.trackingId})})});k.when("A","a-secondary-view","update-my-address","pt2-csm-metrics-utils","ready").register("configure-update-my-address-secondary-view",
function(a,b,d,c){var f=a.state("page-state")||{};a.declarative("update-my-address-open-secondary-view","click",function(c){var e=a.extend({},c.data);c=c.$currentTarget;e.name="update-my-address-secondary-view";e.dataStrategy="preload";e.header=c.find("a").html();b.create(c,e).show();d.init({mapContainerId:"updateMyAddress-map",submitButtonSelector:"#updateMyAddress-submit",trackingId:f.trackingId})})});"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("pdw-update-customer-views",
function(a,b){function d(a,e,d,k){a.post(c,{params:{trackingId:f.trackingId,updateReason:e,csrfToken:h.csrfToken},dataType:"json",success:function(a){a.success&&a.value?b.incrementCount(d):b.incrementCount(k)},error:function(a){b.incrementCount(k)}})}var c=-1!==h.location.host.indexOf("hp-shoppingportal")?"/portal/cstrac/progress-tracker/actions/predicted-delivery-window":"/progress-tracker/package/actions/predicted-delivery-window",f=a.state("page-state")||{};switch(f.promise?f.promise.secondaryPromiseIdentifier:
"NONE"){case "PDW":d(a,"SHOWN","pt2-pdw-shown-updated","pt2-pdw-shown-not-updated");break;case "MISSED_PDW":d(a,"MISSED","pt2-pdw-missed-updated","pt2-pdw-missed-not-updated");break;case "NONE":b.incrementCount("pt2-pdw-no-secondary-promise")}});"use strict";k.when("A","pt2-tooltip","ready").register("pdw-tooltip",function(a,b){a=a.$;var d=a(".pt2-tooltip-trigger.pdw-tooltip-trigger");d.length&&(a("#secondaryStatus .nowrap").last().append(d),b("pdw-tooltip-trigger"))});"use strict";k.when("A","pt2-csm-metrics-utils",
"cookie-monster","ready").register("dataDiscrepancyLogger",function(a,b,d){function c(a,c,e,d){var f=a;if("PrimaryStatus"===a){var f=h(c),g=h(e),f=f!==g?-1<c.indexOf("-")&&-1<e.indexOf("-")?"PrimaryStatus:RangeValue":-1<c.indexOf("-")||-1<e.indexOf("-")?"PrimaryStatus:DateType":"PrimaryStatus:DateValue":"PrimaryStatus:MessageString";b.incrementCount(f+"Mismatch:"+z);b.incrementCount(a+"Mismatch:"+z)}else b.incrementCount(a+"Mismatch:"+z+":YO:"+c+":PT:"+e);b.logError({feature:d,message:f+"MismatchError: orderId\x3d"+
m.orderId+", shipmentId\x3d"+p+", packageIndex\x3d"+q+", itemId\x3d"+E+", fulfillmentType\x3d"+z+', YO\x3d"'+c+'", PT\x3d"'+e+'"'})}function f(a){var b=/^([A-z\s]+) ([A-z\,]{4}) ([a-zA-Z0-9]+) ([a-zA-Z0-9]+)$/;return b.test(a)?a.replace(b,"$1 $3 $4"):a}function g(a){return"USAmazon"===y?e(a,F,r,C):"GBAmazon"===y?e(a,G,w,t):a}function e(a,b,c,e){return-1<a.indexOf("-")?b.test(a)?a.replace(b,"$1 $2 $3 - $4 $5"):a:c.test(a)?a.replace(c,"$1 $2 $3"):e.test(a)?a.replace(e,"$1 $3 $4"):a}function h(a){return"USAmazon"===
y?k(a,F,r,C):"GBAmazon"===y?k(a,G,w,t):a}function k(a,b,c,e){return-1<a.indexOf("-")?b.test(a)?a.replace(b,"$2 $3 - $4 $5"):a:c.test(a)?a.replace(c,"$2 $3"):e.test(a)?a.replace(e,"$3 $4"):a}function l(){var a="GBAmazon"===y?"en-GB":"en-US",b=new Date;b.setDate(b.getDate()-1);return b.toLocaleDateString(a,{month:"short",day:"numeric"})}var m=a.state("page-state")||{},p=m.shipmentId||"",q=m.packageIndex||"",E=m.itemId||"",y=m.realm||"",F=/^([A-z\s]+) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2}) - ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,
G=/^([A-z\s]+) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]* - ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/,r=/^([A-z\s]+) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,w=/^([A-z\s]+) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/,C=/^([A-z\s]+) ([A-z\,]*) ([A-Z][a-z]{2})[a-z]* ([0-9]{1,2})$/,t=/^([A-z\s]+) ([A-z\,]*) ([0-9]{1,2}) ([A-Z][a-z]{2})[a-z]*$/;d=d.getJson("yoShipmentInfo");if(!a.$.isEmptyObject(d)){var z=m.isMfn?"MFN":"AFN";a=d.primaryStatus;var u=m.promise&&m.promise.promiseMessage?m.promise.promiseMessage:"";if(a&&u){var M=
g(u).toLowerCase().replace(/\s/g,""),A=f(a).toLowerCase().replace(/\s/g,""),x=new RegExp(M),B=new RegExp(A);"deliveredyesterday"===A&&(A=A.replace(/yesterday/,l()).toLowerCase().replace(/\s/g,""));x.test(A)||B.test(M)||c("PrimaryStatus",a,u,"pt-primary-status-discrepancy-logger")}d=d.shortStatus;a=m.shortStatus;d&&a&&d!==a&&c("ShortStatus",d,a,"pt-short-status-discrepancy-logger")}});"use strict";k.when("A","a-modal","pt2-csm-metrics-utils","ready").register("configure-customer-delivery-profile-modal",
function(a,b,d){var c=a.$;a.declarative("customer-delivery-profile-modal-link","click",function(f){f.$event.preventDefault();var g=a.extend({},f.data);f=f.$currentTarget;var e=f.find("a").data("ref");g.width=620>h.innerWidth?.75*h.innerWidth:600;g.url=f.find("a").attr("href");g.dataStrategy="ajax";b.create(f,g).show();d.recordReftag(c,e)})});k.when("A","a-secondary-view","pt2-csm-metrics-utils","ready").register("configure-customer-delivery-profile-sec-view",function(a,b,d){var c=a.$;a.declarative("customer-delivery-profile-sec-view-link",
["click"],function(f){f.$event.preventDefault();var g=a.extend({},f.data);f=f.$currentTarget;var e=f.find("a").data("ref");g.url=f.find("a").attr("href");g.dataStrategy="ajax";b.create(f,g).show();d.recordReftag(c,e)})});"use strict";k.when("A","pt2-csm-metrics-utils","ready").register("banner-metric-publisher",function(a,b){var d=a.$;d("body").delegate(".packageTrackerFooterBannerLink","click",function(){var a=d(this).data("clickMetricName");a&&b.incrementCount(a)})});"use strict";k.when("A","pt2-csm-metrics-utils",
"ready").register("Promise",function(a,b){function d(){setTimeout(function(){b.incrementCount("pt2-refresh-page-on-predicted-delivery-window-end");location.reload()},c+1E4)}var c=(a.state("page-state")||{}).timeUntilPredictedDeliveryWindowEnd;0<c&&d()});"use strict";k.when("A","pt2-csm-metrics-utils","share-tracking-confirmation","mash","response-code","a-sheet","ready").register("pt2-share-package-tracking-information",function(a,b,d,c,f,g){function e(a){a&&(k.execute("pt-hide-share-package-tracking-information-bottom-sheet",
function(){g.get("shareTracking-bottom-sheet").hide()}),m||(b.recordReftag(v,l),d(a,function(){h.location.reload()},function(a){}),m=!0))}function n(a){return!a||0===a.length||!a.trim()}var v=a.$,l,m=!1;a.declarative("pt-share-package-tracking-information-click",["click"],function(d){d.$event.preventDefault();var g=d.$currentTarget,k=a.extend({},d.data);d=a.state("page-state")||{};var m=k.message4096CharLimit,r=k.message160CharLimit,t=k.message140CharLimit,x=g.find("a").data("imageurl"),w=k.messageSubject,
C=g.find("a").data("url"),B=g.find("a").data("sharetype"),k=g.find("a").data("clickref");l=g.find("a").data("shareref");b.recordReftag(v,k);if(m&&r&&t&&x&&C&&w){var z=m.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;"),u={baseUrl:encodeURIComponent(C),orderId:d.orderId,csrfToken:h.csrfToken};d.shipmentId&&(u.shipmentId=d.shipmentId);d.itemId&&(u.itemId=d.itemId);d.packageIndex&&(u.packageIndex=d.packageIndex);a.post("/progress-tracker/package/actions/share-tracking-url",
{params:u,success:function(d){a.state("page-state",{shareTrackingType:B});var g=d.value;if(!d.success&&(b.incrementCount("tiny-url-ajax-error"),d.value&&f.INVALID_TOKEN==d.responseCode)){g=d.value;d=a.state("page-state")||{};b.incrementCount("tiny-url-invalid-token-error");d=d.signInRedirectUrl.split("?");g=g+"?useRedirectOnSuccess\x3d1\x26path\x3d"+d[0]+"\x26query\x3d"+encodeURIComponent(d[1]);h.location.href=g;return}d={messagePlain160:r+" "+g,messagePlain140:t+" "+g,messageHTML:"\x3chtml\x3e\x3cbody\x3e"+
z+'\x3ca href\x3d"'+g+'"\x3e '+g+"\x3c/a\x3e\x3c/body\x3e\x3c/html\x3e",messagePlain:m+" "+g,subject:w,url:g,imageURL:x,shareServiceSelectedCallback:e};var k=u.url;g&&50<g?b.incrementCount("non-tiny-url-passed-to-mash"):n(g)?(b.incrementCount("no-url-passed-to-mash"),b.logError({feature:"mash-share-url-error",message:"no url passed to mash share api for pt url: "+C+" , encoded url: "+k})):b.incrementCount("tiny-url-passed-to-mash");(n(d.messagePlain140)||n(d.messagePlain160)||n(d.messagePlain)||n(d.subject))&&
b.incrementCount("missing-text-for-mash");c.share(d)},error:function(a){}})}})});k.when("A","a-sheet","pt2-csm-metrics-utils","ready").register("pt2-configure-share-package-tracking-bottomsheet",function(a,b,d){var c=a.$,f,g=c("#shareTracking-bottomSheet");a.declarative("pt-open-share-package-tracking-information-bottom-sheet",["click"],function(e){f||(e=a.extend({},e.data),d.recordReftag(c,e.ref),e.preloadDomId="shareTracking-bottomSheet",e.name="shareTracking-bottom-sheet",g.appendTo("body"),g.addClass("aok-offscreen"),
g.removeClass("aok-hidden"),e.height=g.outerHeight(!0),g.addClass("aok-hidden"),g.removeClass("aok-offscreen"),e.sheetType="web",e.closeType="icon",f=b.create(e),a.capabilities.ios?c(".pt-share-icon").css("background-image","url('https://m.media-amazon.com/images/G/01/x-locale/cs/ship-track/pt2/share-ios.svg')"):c(".pt-share-icon").css("background-image","url('https://m.media-amazon.com/images/G/01/x-locale/cs/ship-track/pt2/share-android.svg')"));f.show()});a.on("a:sheet:beforeShow:shareTracking-bottom-sheet",
function(a){g.parent().addClass("shareTracking-bottomSheet-container")})});k.when("A","ready").register("share-tracking-confirmation",function(a){return function(b){b=a.state("page-state")||{};var d={trackingId:b.trackingId,csrfToken:h.csrfToken};b.shareTrackingType&&(d.shareTrackingType=b.shareTrackingType);b.customerId&&(d.customerId=b.customerId);b.visitTrigger&&(d.visitTrigger=b.visitTrigger);setTimeout(function(){function b(f){a.post("/progress-tracker/package/actions/share-tracking",{params:d,
success:function(a){},error:function(a){3>f&&setTimeout(function(){b(f+1)},1E3)}})}b(0)},0)}});k.when("A","huddles-chatbox","pt2-csm-metrics-utils","ready").execute(function(a,b,d){a.declarative("render-huddles-chat","click",function(c){var f=a.$,g=c.$currentTarget.find("a").data("ref");b.renderHuddleChat(a.$.extend({},c.data,{showEmbedded:!1}));d.recordReftag(f,g)})});"use strict";k.when("A","preload-images","ready").register("render-images-carousel",function(a,b){a=[];var d=document.getElementById("itemImagesCarousel-container");
if(null!==d&&(d=d.querySelectorAll("img"),0<d.length))for(var c=0;c<d.length;c++){var f=d[c];f.src&&0<f.src.length&&a.push(f.src)}b.preloadImages(a)});"use strict";k.when("A","a-modal","ready").register("photo-on-delivery-modal",function(a,b){var d;a.declarative("pt-delivery-card-pod-popup","click",function(a){d||(d=b.create(a.$currentTarget,{"min-width":620>h.innerWidth?.7*h.innerWidth:300,name:"pt-delivery-card-pod-popup-content",header:a.data.header,dataStrategy:"preload",padding:"none"}));d.show()})});
"use strict";k.when("A","ready").register("promise-product-carousel",function(a){var b=document.querySelector("#promise-card-asin-image-carousel .a-carousel-center");if(b){var d=function(){var a=document.querySelector("#promise-card-asin-image-carousel .a-carousel-left");a&&(b.style.margin="visible"!==a.style.visibility?"0 0":"0 40px")};d();a.on.resize(a.debounce(d,250))}});"use strict";k.when("page-load","ready").register("animate-status-card",function(a){function b(a,b,e,d){null!==a&&e&&setTimeout(function(){var b=
a.querySelector(".pt-status-milestone-marker"),e=a.querySelector(".pt-status-milestone-marker-check"),c=a.querySelector(".pt-status-milestone-label");null!=b&&null!=e&&null!=c&&(b.style.transitionDuration=(250).toString()+"ms",b.className+=" active",e.style.transitionDuration=(250).toString()+"ms",e.className+=" active",c.style.transitionDuration=(250).toString()+"ms",c.className+=" active",d&&(c.className+=" current-label"))},b)}function d(a,b,e,c){null!==a&&setTimeout(function(){var b=a.querySelector(".pt-status-milestone-bar-progress");
if(null!==b){var d=parseInt(e);0!==d&&(c||100>d?(b.style.transitionTimingFunction="ease-out",b.style.transitionDuration=(500+500*d/100).toString()+"ms"):b.style.transitionDuration=(500).toString()+"ms",b.style.width=e+"%")}},b)}a=document.querySelectorAll(".pt-status-milestone");if(0!==a.length){a=Array.prototype.slice.call(a);var c=a.shift();b(c,1E3,"true"===c.dataset.reached,"true"===c.dataset.lastReached);for(c=0;c<a.length;c++)d(a[c],500*c+1E3,a[c].dataset.percentComplete,c===a.length-1),b(a[c],
500*(c+1)+1E3,"true"===a[c].dataset.reached,"true"===a[c].dataset.lastReached)}});"use strict";k.when("A","ready").register("map-commons",function(a){var b={browser:!0};return{METRICS_FEATURE_MAP_TRACKING_ERROR:"persistent-map-tracking-error",METRICS_FEATURE_MAP_TRACKING_ERROR_SECONDARY_STATUS:"persistent-map-tracking-error-secondary-status",METRICS_FEATURE_MAP_TRACKING_ERROR_MAP_TRACKER:"persistent-map-tracking-error-map-tracker",METRICS_FEATURE_MAP_TRACKING_ERROR_FRESHNESS:"persistent-map-tracking-error-freshness",
METRICS_FEATURE_MAP_TRACKING_ERROR_GENERIC:"persistent-map-tracking-error-generic",METRICS_FEATURE_MAP_TRACKING_WARN:"persistent-map-tracking-warn",METRICS_FEATURE_MAP_INITIALIZED:"persistent-map-initialized",METRICS_FEATURE_MAP_ADDRESS_NOT_FOUND:"persistent-map-tracking-address-not-found",METRICS_FEATURE_MAP_ADDRESS_NOT_FOUND_PRE_RENDER:"persistent-map-tracking-address-not-found-pre-render",METRICS_FEATURE_MAP_ERROR_PRE_RENDER:"persistent-map-tracking-error-pre-render",METRICS_FEATURE_MAP_FATAL:"persistent-map-tracking-fatal",
METRICS_FEATURE_MAP_FATAL_LOG:"persistent-map-tracking-fatal-log",METRICS_FEATURE_MAP_FATAL_PRE_RENDER:"persistent-map-tracking-fatal-pre-render",METRICS_FEATURE_MAP_RENDERED:"persistent-map-tracking-map-rendered",METRICS_FEATURE_MAP_DWELL_TIME:"persistent-map-tracking-map-dwell-time",METRICS_FEATURE_MAP_ZOMBIE_TIME:"persistent-map-tracking-map-zombie-time",METRICS_FEATURE_MAP_SIGN_IN_AGAIN:"persistent-map-tracking-sign-in-again",METRICS_FEATURE_MAP_INVALID_TOKEN:"persistent-map-tracking-invalid-token",
METRICS_FEATURE_MAP_INVALID_TOKEN_LOG:"persistent-map-tracking-invalid-token-log",METRICS_FEATURE_MAP_DELIVERY_FAILED_PREFIX:"persistent-map-tracking-",METRICS_FEATURE_MAP_SKIPPED_STOP_AFTER_HEALTHY:"persistent-map-tracking-skipped-stop-after-healthy",METRICS_FEATURE_MAP_SKIPPED_AFTER_X_STOPS_PATTERN:"persistent-map-tracking-skipped-after-[#]-stops",METRICS_FEATURE_MAP_SKIPPED_STOP_LANDING:"persistent-map-tracking-skipped-stop-landing",METRICS_FEATURE_MAP_SKIPPED_STOP_BECAME_HEALTHY:"persistent-map-tracking-skipped-stop-became_healthy",
METRICS_FEATURE_MAP_ALREADY_DELIVERED:"persistent-map-tracking-already-delivered",METRICS_FEATURE_MAP_BECAME_DELIVERED:"persistent-map-tracking-became-delivered",METRICS_FEATURE_MAP_MEMOIZATION_SKIPPED:"persistent-map-tracking-memoization-skipped",TEXT_EMPHASIZED:"text-emphasized",METRICS_FEATURE_MAP_EVENT_LOG:"persistent-map-tracking-event-log",METRICS_FEATURE_MAP_FAILSAFED:"persistent-map-tracking-failsafed",METRICS_FEATURE_MAP_FAILSAFED_LOG:"persistent-map-tracking-failsafed-log",METRICS_FEATURE_MAP_FAILSAFED_PREMATURELY:"persistent-map-tracking-failsafed-prematurely",
METRICS_FEATURE_MAP_FAILSAFED_LATENCY_SUFFIX:"persistent-map-tracking-failsafed-latency-",METRICS_FEATURE_MAP_FAILSAFED_PREMATURELY_LOG:"persistent-map-tracking-failsafed-prematurely-log",METRICS_FEATURE_STATIC_MAP_COUNT:"persistent-map-type-static",METRICS_FEATURE_REAL_TIME_MAP_COUNT:"persistent-map-type-real-time",METRICS_FEATURE_NO_MAP_COUNT:"persistent-map-type-none",METRICS_FEATURE_PERSISTENT_MAP_STATIC_MAP_ERROR:"persistent-map-static-map-error",METRICS_FEATURE_PERSISTENT_MAP_GEOLOCATION_MISSING:"persistent-map-static-map-geolocation-missing",
METRICS_FEATURE_PERSISTENT_MAP_REALTIME_FALLBACK_TO_STATIC_MAP:"persistent-map-realtime-fallback-to-static",METRICS_FEATURE_PERSISTENT_MAP_REALTIME_FALLBACK_TO_STATIC_MAP_ERROR:"persistent-map-realtime-fallback-to-static-error",METRICS_FEATURE_PERSISTENT_MAP_REAL_TIME_MAP_ERROR:"persistent-map-real-time-map-error",fallbackToNoMap:function(){var a=document.getElementById("pt-address-info"),c=document.querySelector(".pt-map-outer-container");c&&(c.classList.remove("pt-map-type-static"),c.classList.remove("pt-map-type-realtime"),
c.classList.add("pt-map-type-nomap"),a&&(a.style.display="block"),Metrics.incrementCount("persistent-map-type-nomap",b))}}});k.when("pt2-page-utils","page-load","ready").register("persistent-map-layout",function(a){function b(){var a=864>=Math.max(document.documentElement.clientWidth||0,h.innerWidth||0)?"narrow":"wide";if(a!==d){for(var b=document.querySelectorAll("[responsivebox][responsivelayout\x3d"+("narrow"==a?"wide":"narrow")+"]"),c=0;c<b.length;c++){var f=b[c],k=f.getAttribute("responsivebox");
if(k=document.querySelector("[responsivebox\x3d"+k+"][responsivelayout\x3d"+a+"]"))for(;0<f.childNodes.length;)k.appendChild(f.childNodes[0])}d=a}if(a=document.querySelector("#pt-customer-controls-toolbar-carousel-desktop .a-carousel-center"))if(b=document.querySelector("#cstrac-customer-control-widget-desktop .scroller-content-pt"),c=document.querySelector("#pt-customer-controls-toolbar-carousel-desktop .a-carousel-left"))"hidden"===c.style.visibility?(a.style.margin="auto",b&&(b.style.display="block")):
a.style.margin="0 0 0 50px"}var d="unknown",c=document.querySelector(".pt-sticky-top-container");c&&"function"===typeof IntersectionObserver&&"function"===typeof c.classList.toggle&&(new IntersectionObserver(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.target.classList.toggle("stuck",1>c.intersectionRatio)}},{threshold:[1]})).observe(c);try{var f=new URL(h.location);f.searchParams.has("amzlMessageId")&&(f.searchParams.delete("amzlMessageId"),h.history.replaceState({},"",f))}catch(g){}h.addEventListener("resize",
a.debounce(b,100));b()});"use strict";k.when("A").execute(function(a){a.declarative("pt-open-lens-verify-transparency",["click"],function(a){amazon.mash.navigate({url:"ssnap://www.amazon.com"+a.data.link})})})});