(function(d){var b=window.AmazonUIPageJS||window.P,w=b._namespace||b.attributeErrors,a=w?w("HuddlesChatboxJS",""):b;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,b,w){d.when("A","huddles-core","ready").register("huddles-chatbox-interaction",function(a,e){function f(){if(t.width()&&t.offset()){var a=t.width();return a+t.offset().left-h.width()>.9*a?m.css("right",n):m.css("right",n+a)}a=parseInt(c.css("padding-right"),10);return m.css("right",n+a)}function d(){if(0!==
v.length&&null!==v.position()){var a=h.height(),k=Math.max(0,v.position().top+v.height()-h.scrollTop());300>a-k?r.height(0):r.height(Math.min(500,a-k)-u.outerHeight())}}function l(){d();f()}var h=a.$(b),c=a.$("body"),v=a.$("#navbar, #navWrapper, .header-contents-container").first(),t=a.$("#nav-flyout-ewc"),m=a.$(".huddles-chatbox"),r=a.$(".huddles-chatbox__content"),u=a.$(".huddles-chatbox__toolbar"),g=a.$(".huddles-chatbox__toolbar-minimize"),n=parseInt(m.css("right"),10);setInterval(f,3E3);h.resize(a.debounce(l,
100));h.scroll(a.debounce(d,100));return{minimizeChatbox:function(c){m.show();c?(r.hide(),g.addClass("huddles-chatbox__vertical-flip")):a.slideUp(r,200,"ease-out",function(){g.addClass("huddles-chatbox__vertical-flip")})},maximizeChatbox:function(){},restoreChatbox:function(c){r.show();l();c?(m.show(),g.removeClass("huddles-chatbox__vertical-flip")):a.slideDown(m,200,"ease-out",function(){g.removeClass("huddles-chatbox__vertical-flip")})},closeChatbox:function(){a.slideUp(m,200,"ease-out")}}});"use strict";
d.when("A","ready").register("huddles-chatbox-storage",function(a){function e(){try{return p&&"sessionStorage"in b&&null!==b.sessionStorage&&sessionStorage}catch(l){return!1}}var f="huddle-chatbox"+b.location.pathname,p=!1;return{enableSessionStorage:function(){p=!0},getChatboxState:function(){if(e())return JSON.parse(sessionStorage.getItem(f))||{};p&&d.log("sessionStorage not available","WARN");return{}},setChatboxState:function(a){e()&&sessionStorage.setItem(f,JSON.stringify(a))},DISPLAY_CODE:{MINIMIZED:"MINIMIZED",
MAXIMIZED:"MAXIMIZED",NORMAL:"NORMAL"}}});"use strict";d.when("A","ready").register("huddles-chatbox-metrics",function(a){return{logCounter:function(a,d){b.ue&&b.ue.count&&(a="HuddlesChatbox."+a,b.ue.count(a,(b.ue.count(a)||0)+(d||1)))}}});"use strict";d.register("huddles-chatbox-constants",function(){return{MARKETPLACEID_TO_DOMAIN_MAP:{test:{ATVPDKIKX0DER:"development.amazon.com",A1F83G8C2ARO7P:"uk-development.amazon.com",A1PA6795UKMFR9:"de-development.amazon.com",A13V1IB3VIYZZH:"fr-development.amazon.com",
AJZF8LZ1EJVJN:"es-development.amazon.com",A3HOBANJMCMD83:"it-development.amazon.com",A2XZLSVIQ0F4JT:"in-development.amazon.com",A1VC38T7YXB528:"jp-development.amazon.com",A2EUQ1WTGCTBG2:"ca-development.amazon.com",AZXD3QD5B39HD:"br-development.amazon.com",A3P3J5A7D2ZVXI:"mx-development.amazon.com"},master:{ATVPDKIKX0DER:"pre-prod.amazon.com",A1F83G8C2ARO7P:"uk-pre-prod.amazon.com",A1PA6795UKMFR9:"de-pre-prod.amazon.com",A13V1IB3VIYZZH:"fr-pre-prod.amazon.com",A1RKKUPIHCS9HS:"es-pre-prod.amazon.com",
A21TJRUUN4KGV:"in-pre-prod.amazon.com",APJ6JRA9NG5V4:"it-pre-prod.amazon.com",A1VC38T7YXB528:"jp-pre-prod.amazon.com",A2EUQ1WTGCTBG2:"ca-pre-prod.amazon.com",A2Q3Y263D00KWC:"br-pre-prod.amazon.com",A1AM78C64UM0Y8:"mx-pre-prod.amazon.com"},prod:{ATVPDKIKX0DER:"www.amazon.com",A1F83G8C2ARO7P:"www.amazon.co.uk",A13V1IB3VIYZZH:"www.amazon.fr",A1PA6795UKMFR9:"www.amazon.de",APJ6JRA9NG5V4:"www.amazon.it",A21TJRUUN4KGV:"www.amazon.in",A1RKKUPIHCS9HS:"www.amazon.es",A1VC38T7YXB528:"www.amazon.co.jp",A2EUQ1WTGCTBG2:"www.amazon.ca",
A2Q3Y263D00KWC:"www.amazon.com.br",A1AM78C64UM0Y8:"www.amazon.com.mx"}}}});"use strict";d.register("huddles-chatbox-feature-config",function(){return{chatbox:!0}});"use strict";d.when("A","huddles-chatbox-feature-config","huddles-chatbox-constants","ready").execute(function(a,e,f){function p(){var c=a.state("huddlesClientConfig");b.huddles_client_config=c;b.ue_mid||(b.ue_mid=c.marketplaceId);b.ue_sn||(b.ue_sn=b.location.hostname)}function l(a){var c=b.ue.sn||b.ue_sn;return c&&c.substring(c.length-
a.length,c.length)===a}function h(){var c=a.state("huddlesClientConfig");return c&&c.clientType&&"INTERNAL"==c.clientType}h()&&p();if(!b.ue||"PackageProgressTracker"!==b.ue_pty||l("amazon.com"))b.HuddlesChatboxConfig?d.log("Chatbox config already registered","WARN"):e.chatbox&&(b.HuddlesChatboxConfig={},a.get(function(){var c=a.state("huddlesClientConfig");if(h()&&c.domain&&c.marketplaceId&&f){var b=f.MARKETPLACEID_TO_DOMAIN_MAP[c.domain];if(b&&b[c.marketplaceId])return"https://"+b[c.marketplaceId]+
"/conversations/chatbox-config-internal"}return"/conversations/chatbox-config"}(),{params:{originalUrl:encodeURIComponent(b.location.href),pty:b.ue_pty},withCredentials:h(),timeout:4E4,success:function(c){if(c.chatboxSupported){if(a.objectIsEmpty(c.endpointConfig)||a.objectIsEmpty(c.startupArgs)){d.log("Invalid Huddles chatbox config","ERROR");b.HuddlesChatboxConfig=null;return}var e={chatboxSupported:!0,chatboxEndpointConfig:c.endpointConfig,chatboxStartupArgs:a.$.extend({},c.startupArgs,{renderContext:{isRemote:!0}}),
enableSessionStorage:c.enableSessionStorage}}else e={chatboxSupported:!1},d.log("Chatbox functionality suppressed","WARN");d.declare("huddles-chatbox-config",e);b.HuddlesChatboxConfig=e;c.chatboxContainer&&a.$(c.chatboxContainer).appendTo("body")},error:function(a,e,f){b.HuddlesChatboxConfig=null;d.log("Failed to get Huddles chatbox config. "+e+": "+f,"ERROR")}}))});d.when("A","huddles-core","huddles-chatbox-interaction","huddles-chatbox-storage","huddles-chatbox-metrics","huddles-chatbox-config",
"ready").register("huddles-chatbox",function(a,b,f,p,l,h){function c(a){g[q||"INBOX"]=a;p.setChatboxState(g)}function e(k){var d=k.displayCode||n.NORMAL,e=a.$.extend({},r,k);k.showEmbedded&&k.container?(k.container instanceof a.$&&(k.container=k.container.get(0)),b.startHuddleApp(k.container,u,e),l.logCounter("Rendered.Embedded")):(d===n.MINIMIZED?f.minimizeChatbox(!0):(k=document.querySelector(".huddles-chatbox__content"),b.startHuddleApp(k,u,e),d===n.MAXIMIZED?(f.restoreChatbox(!0),f.maximizeChatbox()):
f.restoreChatbox()),g={},c(d),l.logCounter("Rendered."+d))}function t(a){q=null;e(a||{})}function m(a){if(!a||!a.huddleId)return d.log("Required render parameter huddleId missing for renderHuddleChat","FATAL"),!1;q=a.huddleId;e(a)}var r=h.chatboxStartupArgs,u=h.chatboxEndpointConfig;h.enableSessionStorage&&p.enableSessionStorage();var g=p.getChatboxState(),n=p.DISPLAY_CODE,q;a.objectIsEmpty(g)||a.each(g,function(a,b){"INBOX"===b?t({showEmbedded:!1,displayCode:a}):m({huddleId:b,showEmbedded:!1,displayCode:a})});
return{renderInbox:t,renderHuddleChat:m,restoreChatbox:function(){if(!q||!g[q]||g[q]===n.MINIMIZED){var d={};q&&(d.huddleId=q);d=a.$.extend({},r,d);var e=document.querySelector(".huddles-chatbox__content");b.startHuddleApp(e,u,d)}f.restoreChatbox();c(n.NORMAL);l.logCounter("Restored")},closeChatbox:function(c){c?(c instanceof a.$&&(c=c.get(0)),b.closeHuddleApp(c),l.logCounter("Closed.Embedded")):(f.closeChatbox(),c=document.querySelector(".huddles-chatbox__content"),b.closeHuddleApp(c),g={},p.setChatboxState(g),
l.logCounter("Closed"))},minimizeChatbox:function(){f.minimizeChatbox();var a=document.querySelector(".huddles-chatbox__content");b.closeHuddleApp(a);c(n.MINIMIZED);l.logCounter("Minimized")},maximizeChatbox:function(){f.maximizeChatbox();c(n.MINIMIZED);l.logCounter("Maximized")},setPersonaName:b.setPersonaName,deprecated_watchPartyEvent:b.deprecated_watchPartyEvent,onContextChange:b.onContextChange}});"use strict";d.when("A","huddles-chatbox","ready").execute(function(a,b){a.declarative("minimizeChatbox",
"click",function(d){a.$(".huddles-chatbox__content").is(":visible")?b.minimizeChatbox():b.restoreChatbox()});a.declarative("closeChatbox","click",function(a){b.closeChatbox()})})});